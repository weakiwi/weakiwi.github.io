<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>weakiwi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="weakiwi">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="weakiwi">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="weakiwi">
  
    <link rel="alternative" href="/atom.xml" title="weakiwi" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://www.hi-pda.com/forum/uc_server/data/avatar/000/57/84/71_avatar_middle.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">weakiwi</a></h1>
		</hgroup>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		
		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="http://weakiwi.digitcv.com/#/resume">我的简历</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/weakiwi/" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/u/1750494183/home?wvr=5&lf=reg" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">weakiwi</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://www.hi-pda.com/forum/uc_server/data/avatar/000/57/84/71_avatar_middle.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">weakiwi</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="http://weakiwi.digitcv.com/#/resume">我的简历</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/weakiwi/" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/1750494183/home?wvr=5&lf=reg" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-openshiftfq" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/15/openshiftfq/" class="article-date">
  	<time datetime="2015-08-15T04:09:39.000Z" itemprop="datePublished">2015-08-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/15/openshiftfq/">openshiftfq</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->

        <script src="/assets/js/APlayer.min.js"> </script><p> 翻墙</p>
<h1 id="openshift翻墙尝试"><a href="#openshift翻墙尝试" class="headerlink" title="openshift翻墙尝试"></a>openshift翻墙尝试</h1><p>标签（空格分隔）： 翻墙</p>
<hr>
<p>之前注册了openshift本来是想用来替代sae的，结果他的那个部署工具实在是不会用，但是自己也不想白白浪费这个将来不知道还免不免费的账号，所以就用来翻墙咯。<br>原理就是走ssh的端口映射啦，这里选用的是secureCRT，因为putty不知道怎么才能每次使用指定的公钥和用户名。<br>首先注册openshift账号以及上传公钥什么的比较简单，这里就不多说了，主要注意的是如果使用puutykeygen生成的记得保存为openssh格式这样secureCRT可以直接使用。</p>
<p>接下来就是secureCRT+proxifier的翻墙教程啦。<br><img src="http://ww2.sinaimg.cn/bmiddle/68566be7jw1ev35ngzmbij20yv09t0v7.jpg" alt="获取用户名和ssh地址">@前面的就是登陆用的用户名，后面的则是ssh地址。<br>1.在secureCRT里面选择新建会话。<img src="http://ww2.sinaimg.cn/mw690/68566be7jw1ev35q8ahlsj20iu0b1402.jpg" alt="此处输入图片的描述">主机名就是@后面那串，用户名就是@前面那串。描述还有标题什么的随便填写就好了<br>2.在菜单的“选项”-“全局选项”-“SSH2”里导入之前生成并且上传的公钥。<br><img src="http://ww4.sinaimg.cn/large/68566be7jw1ev35ujn3daj20hx0hfwhb.jpg" alt="此处输入图片的描述"><br>3.打开连接，右键点击刚才创建的连接，“属性”-“端口转发”-“添加”<img src="http://ww4.sinaimg.cn/large/68566be7jw1ev35w831doj20wk0jdn2g.jpg" alt="此处输入图片的描述"><br>端口填写7070，“使用socks4或5动态转发”这里得打钩。</p>
<p>接下来是proxifier设置：<br>1.新建一个配置文件<br>2.添加代理服务器-127.0.0.1:7070<br>3.设置默认规则为direct，然后把你想翻墙的程序网站添加到规则里面，这样访问无须翻墙的网站速度还是过得去的。</p>
<p>最终效果：<br><img src="http://ww2.sinaimg.cn/large/68566be7jw1ev3637gf11j20ai0qe0vh.jpg" alt="此处输入图片的描述"></p>
<p>最后说下openshift主要还是用来部署程序，做一些云应用什么的。而且之前openshift就因为被大规模地用来作为翻墙跳板而屏蔽过，再加上现在速度也不理想，所以大家平时用来查资料什么的就好了。就当做各种翻墙方案的一种后备手段吧。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-aria2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/11/aria2/" class="article-date">
  	<time datetime="2015-08-11T00:22:52.000Z" itemprop="datePublished">2015-08-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/11/aria2/">aria2</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->

        <script src="/assets/js/APlayer.min.js"> </script><p>树莓派</p>
<h1 id="编译aria2c"><a href="#编译aria2c" class="headerlink" title="编译aria2c"></a>编译aria2c</h1><p>标签（空格分隔）： 树莓派</p>
<hr>
<p>因为最近实在不想看单片机视屏了，gpio也陷入瓶颈，python进展也比较慢。于是乎就找些好玩的源码编译一下咯。话说回来，还真是不查不知道，树莓派上很多软件的版本真的很老。比方这次打算尝试的aria2，树莓派上的版本是1.15，sourceforge上已经更新到了1.19了。<br>废话不多说，首先就是从SourceForge上获取<a href="http://sourceforge.net/projects/aria2/?source=directory" target="_blank" rel="external">aria2源码</a>啦，注意别下成win32的。（github上面也有对应项目，但是不知道为何不能直接按照网上的编译教程来）。<br>下载好了后cd到源码目录，接下来的事情就三句话</p>
<blockquote>
<p>./configure<br>make<br>make install</p>
</blockquote>
<p>然后就是漫长的等待了<br><img src="http://ww3.sinaimg.cn/large/68566be7gw1euxwhgdv77j21hc0sxar0.jpg" alt="./configure"><br><img src="http://ww2.sinaimg.cn/large/68566be7gw1euxwqsb8h6j21hc0sxh60.jpg" alt="make"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-ndsl" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/10/ndsl/" class="article-date">
  	<time datetime="2015-08-10T02:12:09.000Z" itemprop="datePublished">2015-08-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/10/ndsl/">ndsl</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->

        <script src="/assets/js/APlayer.min.js"> </script><p>技术</p>
<h1 id="NDSL导电胶更换"><a href="#NDSL导电胶更换" class="headerlink" title="NDSL导电胶更换"></a>NDSL导电胶更换</h1><p>标签（空格分隔）： 技术</p>
<hr>
<p>最近因为的确找不到什么事情可以做的，于是乎就网购了一套导电胶来修补一下NDSL惨不忍睹的手感。<br>首先最重要的也是所有拆机的共同点——把电池、触控笔还有保护卡这一类的东西能拆就先拆了。接下来建议跟着网上的教程走，因为ndsl有挺多隐藏螺丝的（比方说防滑垫下面的还有电池下面的）。在拆机的时候个人建议准备一个磁铁一类的东西，用这玩意收纳螺丝钉实在太有用了。还有就是注意在拆机的过程中别吧lr的弹簧弄坏了，那个太难装了。翘壳子建议用校园卡什么的，一点一点的撬开，如果翘不开，就检查一下还有没有螺丝钉没卸下来的，千万不要用蛮力。<br>然后把电路板掀开以后换导电胶也就是那么回事啦。<br><img src="http://ww3.sinaimg.cn/mw690/68566be7jw1euvd5e3m6ej20u00u0dlb.jpg" alt="此处输入图片的描述"><br><img src="http://ww4.sinaimg.cn/mw690/68566be7jw1euvd5pcd8xj20u00u043a.jpg" alt="此处输入图片的描述"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-fanspeed" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/01/fanspeed/" class="article-date">
  	<time datetime="2015-08-01T12:57:49.000Z" itemprop="datePublished">2015-08-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/01/fanspeed/">fanspeed</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->

        <script src="/assets/js/APlayer.min.js"> </script><p>技术</p>
<h1 id="树莓派风扇测速-update"><a href="#树莓派风扇测速-update" class="headerlink" title="树莓派风扇测速 update"></a>树莓派风扇测速 update</h1><p>标签（空格分隔）： 技术</p>
<hr>
<p>经过整整一天的折腾，也总算弄明白了风扇测速线的大概工作原理。首先第一个错误就是风扇并非一个i2c设备（这个被喷了），而是标准的pwm设备。测速线输出速度的方法是，通过调整输出脉冲的宽幅（大概就是方波的波长吧），来输出占空比（有波的长度和输出周期的比值），然后占空比和转速是成正比的，查表就可以得到风扇的转速了。还有一种是转一圈输出一个脉冲，但是根据我的测试，手头上的风扇明显不是这种。<br>所以要检测速度也是比较简单，参考了下单片机检测风扇速度的方法，检测测速线输出的下降沿就好了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> gpio</div><div class="line"><span class="keyword">import</span> timeit</div><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line">gpio.setmode(gpio.BOARD) <span class="comment">#设置模式为board</span></div><div class="line">gpio.setup(<span class="number">7</span>,gpio.OUT)</div><div class="line">gpio.output(<span class="number">7</span>,<span class="number">0</span>)</div><div class="line">time.sleep(<span class="number">1</span>)</div><div class="line">gpio.output(<span class="number">7</span>,<span class="number">1</span>) <span class="comment">#无论如何先这样操作一下</span></div><div class="line">gpio.setup(<span class="number">7</span>,gpio.IN)</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer1</span><span class="params">()</span> :</span></div><div class="line">        <span class="keyword">while</span> <span class="keyword">True</span> :</div><div class="line">                <span class="keyword">if</span> gpio.input(<span class="number">7</span>) == <span class="number">0</span> : <span class="comment">#检测下降沿</span></div><div class="line">                        gpio.setup(<span class="number">7</span>,gpio.OUT)</div><div class="line">                        gpio.output(<span class="number">7</span>,<span class="number">1</span>)</div><div class="line">                        gpio.setup(<span class="number">7</span>,gpio.IN)</div><div class="line">                        <span class="keyword">if</span> gpio.input(<span class="number">7</span>) == <span class="number">0</span>:</div><div class="line">                                <span class="keyword">break</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">load1</span><span class="params">()</span> :</span></div><div class="line">        gpio.setup(<span class="number">7</span>,gpio.OUT) <span class="comment">#排除掉设置的时间</span></div><div class="line">        gpio.setup(<span class="number">7</span>,gpio.IN)</div><div class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</div><div class="line">        <span class="keyword">from</span> timeit <span class="keyword">import</span> Timer</div><div class="line">        <span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> gpio</div><div class="line">        t1=Timer(<span class="string">"timer1()"</span>,<span class="string">"from __main__ import timer1"</span>) <span class="comment">#计算两次下降沿的时间</span></div><div class="line">        t2=Timer(<span class="string">"load1()"</span>,<span class="string">"from __main__ import load1"</span>)</div><div class="line">        t1=t1.timeit(<span class="number">1</span>)-t2.timeit(<span class="number">1</span>)</div><div class="line">        t1=t1/<span class="number">0.00004</span> <span class="comment">#计算占空比</span></div><div class="line">        <span class="keyword">print</span> t1</div></pre></td></tr></table></figure>
<p><img src="http://ww2.sinaimg.cn/thumbnail/68566be7gw1euneqpvb3lj208j0170st.jpg" alt="代码效果"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-fan" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/31/fan/" class="article-date">
  	<time datetime="2015-07-31T15:11:07.000Z" itemprop="datePublished">2015-07-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/31/fan/">fan</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->

        <script src="/assets/js/APlayer.min.js"> </script><p>技术</p>
<h1 id="树莓派关于风扇的折腾"><a href="#树莓派关于风扇的折腾" class="headerlink" title="树莓派关于风扇的折腾"></a>树莓派关于风扇的折腾</h1><p>标签（空格分隔）： 技术</p>
<hr>
<p>暑假回家以后就一直在折腾树莓派。aria2c下载机以及samba共享什么的，因为dietpi都有现成的方案，所以就不说了。主要还是集中在对gpio口的各种折腾上面。<br>失败的项目有：<br>1.pifm传送图片（没有找到合适的sstv2wav或者psk31-wav脚本，自己也不理解编码方式。对于python建立wav文件也实在不明白）<br>2.树莓派连接郭天祥的实验板做实验（因为自己傻逼地忘记购买电阻，所以输出电流无法控制，怎么弄都是高电平）</p>
<p>现在就来说下迄今为止还算成功的项目吧——树莓派加装风扇<br>风扇是从父亲那坏掉的hp mini 110上拆下来的。有三根线，红5v、黑gnd、黄是测速线。<br><img src="http://ww3.sinaimg.cn/bmiddle/68566be7gw1eumchqbjauj20jh0k5n12.jpg" alt="40pin的具体定义"><br>不得不说，这个风扇还是给力的。树莓派cpu的温度从43度下降到了35度，虽然感觉也没起到什么特殊的作用，但是总算废物利用了不是吗？<br>最主要的折腾还是通过测速线读取风扇的转速。通过资料知道了这种一条线的八成就是i2c协议总线<a href="http://baike.baidu.com/link?url=T7AL6FVuIeEsA2S-CH7rC6ij--o2ajHLDtY-LHOnZi5uSHlOs0-vmSLuVYbAYi5yjcoqux6gDhz_g-F_GyQeJ91b9niYW8kl9dN9Cd-7AgQkEh9YgadnkBCNaYRnzOducXVTsNqisTRk3h40iLLP3q" target="_blank" rel="external">什么是i2c</a>了。于是便开始上手折腾i2c，开启i2c支持主要是一下几个方面：<br>1.官方系统可以在adavnaced option里面直接开启<br>2.如果是我等dietpi，需要修改config.txt，blcklist等</p>
<p>注意这里风扇测速线应该直接接pin3也就是sda，但是也不知为何好像其他的传感器（dht11）之类的都是随便接一个gpio就完事了。至于电阻什么的接不接好像又有很多种定论。最重要的还是没人像我这样闲，所以关于风扇测速线的接法也很难找到。不过可以参看<a href="http://shumeipai.nxez.com/2014/10/10/raspberry-dht11-get-temperature-data.html" target="_blank" rel="external">树莓派从 DHT11 温度湿度传感器读取数据</a>，也算是触类旁通吧。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-lkong2weibo3" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/07/lkong2weibo3/" class="article-date">
  	<time datetime="2015-07-07T14:34:22.000Z" itemprop="datePublished">2015-07-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/07/lkong2weibo3/">lkong2weibo3</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->

        <script src="/assets/js/APlayer.min.js"> </script><p>技术</p>
<h1 id="lkong2weibo"><a href="#lkong2weibo" class="headerlink" title="lkong2weibo"></a>lkong2weibo</h1><p>标签（空格分隔）： 技术</p>
<hr>
<p>还是不习惯写博客，又有一段时间没有更新啦。不过就连我自己都没想到自己当初只是为了发泄的作品，竟然能够走那么远。<br>update：<br>2015年7月7日22:36:35</p>
<ol>
<li>采用了高大上的异步采集方式，每次beautiulsoup处理一次网页，采集4个数据——两个书评以及对应的两个链接，然后发两次微博，这样能减少fetch url，至于效果是否明显，得观察一天啦。还是没有很好地掌握python对列表的遍历。不然我想用循环的方式写，一次采集五个，这样节省云豆的效果可能更加明显。</li>
<li>加入对短网址的处理，因为微博提供了对应的json提交方式，所以我对照发微博的方式写了，感觉并不难</li>
</ol>
<hr>
<p> 对lknog2weibo未来的展望</p>
<ol>
<li>首先当然是进一步优化代码了，伪异步还是需要提高，希望能自己判断更新的频繁程度来进行调整</li>
<li>比较简单的一个就是在程序内部增加根据时间来停止应用</li>
<li>折腾完lkong2weibo这个项目以后，想做更高大上的。大数据啊，分布式爬虫啊，lxml什么的，beautifulsoup虽然用起来简单，但是缺点就是局限性啦</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-lkong2weibo-almost-finish" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/03/lkong2weibo-almost-finish/" class="article-date">
  	<time datetime="2015-07-03T04:39:22.000Z" itemprop="datePublished">2015-07-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/03/lkong2weibo-almost-finish/">lkong2weibo almost finish</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->

        <script src="/assets/js/APlayer.min.js"> </script><p>技术</p>
<h2 id="lol，lkong2weibo完成度已经达到百分之八十"><a href="#lol，lkong2weibo完成度已经达到百分之八十" class="headerlink" title="lol，lkong2weibo完成度已经达到百分之八十"></a>lol，lkong2weibo完成度已经达到百分之八十</h2><pre><code>一开始以为可能这个学期都无法完成这个项目，没想到两天能到达这个地步，真的为自己感到高兴。
</code></pre><h2 id="具体的解决方法"><a href="#具体的解决方法" class="headerlink" title="具体的解决方法"></a>具体的解决方法</h2><ol>
<li>首先就是用beautifulsoup处理“<p></p>”标签。网上都说lxml更加强大，但是感觉beautifulsoup的确非常容易上手。就比方说提取p标签<code>tag=soup.find(&quot;div&quot;,&quot;ys-comments-message&quot;)</code>。感觉比较容易理解，至少比之前的正则表达式好用太多。其实这应该是最容易的一个部分，因为我主要抓取的就是一个网页，而且优书网的格式还是比较标准的。</li>
<li>提取完文本以后需要进行两步处理：提取正文和转换编码，<code>msg=tag.get_text()</code>，转换编码在发送部分执行</li>
<li>接着就是判断是否为最新书评这个部分，这一部分也是我折腾了比较长时间的一个部分。一开始我的想法是提取“xx分钟前”的xx来进行判断，结果刚刚在网上找到相应的正则表达式<code>&gt;&gt;&gt; p = re.compile(r&#39;\d+&#39;)&gt;&gt;&gt; p.findall(&#39;vid:122313&#39;)</code>，并且执行了以后就抓到了第一个bug-用户名中存在数字（我是抓下正文，然后直接提取数字）。为了解决这个问题，我加了个数字是否小于60的判断。结果第二天抓到了第二个bug，“xx小时前”，这样就严重干扰了之前的判断。无奈只好用之前的办法了——把评论文件存在本地，下次抓取后进行比较，相同则不发送。然而sae是不支持本地文件处理的，对应提供的是storage、kvdb、memcache。最后一个需要云豆，果断放弃。而storage在存储文件的时候出现了编码问题，放弃。只能用kvdb了。</li>
<li>发送微博。也是比较蛋疼的一个部分，一开始怎么都找不到一个简洁一些的发送方式，知道找到了<a href="http://blog.haipo.me/?p=1168" target="_blank" rel="external">微博比特币价格机器人</a>，不光提供了只需要token的发送方式，还提供了一种比较简单的获取token的方式。p.s:有时候会莫名奇妙地发送失败，所以加了个header伪装一下。</li>
<li>最后还没有处理好的就是常驻后台，cron一天只能执行32次任务，所以并不完美。</li>
</ol>
<pre><code>参考连接:[python re 正则表达式 怎么获取vid:122313, 其中的数字？][2]
[Beautiful Soup 4.2.0 文档][3]
[sae python手册][4]
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-update-lkong2weibo" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/02/update-lkong2weibo/" class="article-date">
  	<time datetime="2015-07-02T00:26:06.000Z" itemprop="datePublished">2015-07-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/02/update-lkong2weibo/">update:lkong2weibo</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->

        <script src="/assets/js/APlayer.min.js"> </script><p>技术## ifttt方面 ##<br>    也许是ifttt最近修正了他的feed的问题，所以之前一直无法识别的rss突然可以识别了，所以<a href="http://weibo.com/u/1750494183/home?wvr=5" target="_blank" rel="external">我的微博</a><br>如今用的就是ifttt实现的lkong2weibo。缺点还是原来那样——更新频率太慢</p>
<h2 id="python爬虫方面"><a href="#python爬虫方面" class="headerlink" title="python爬虫方面"></a>python爬虫方面</h2><pre><code>之前也说到了，因为我要实现的主干网上都有现成的[微博python sdk][2]。所以主要困难集中在如何提取固定的网页标签中的内容包括：
</code></pre><ol>
<li>书名号内的书名</li>
<li><p></p>标签内的书评</li>
<li><span class="num2star">3</span><div class="ys-comments-message">中间的评分3</div></li>
</ol>
<p>处理方式根据昨天晚上的查找大概有一下几种</p>
<ol>
<li><a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="external">正则表达式</a></li>
<li><a href="http://www.cnblogs.com/yupeng/p/3362031.html" target="_blank" rel="external">beautifulsoup</a></li>
<li>htmlparser</li>
</ol>
<p>其中beatifulsoup是最为方便的，因为模块里已经预设好了各种标签。<br>所以我主要是用beautifulsoup处理的，代码如下：</p>
<pre><code>lkong2weibo
</code></pre><p>import urllib2<br>from bs4 import BeautifulSoup</p>
<p>response=urllib2.urlopen(“<a href="http://www.yousuu.com/comments/digest&quot;)#读入优书网网址" target="_blank" rel="external">http://www.yousuu.com/comments/digest&quot;)#读入优书网网址</a></p>
<p>soup=BeautifulSoup(response)</p>
<p>print soup.find_all(‘p’)#输出所有</p><p></p>标签内容<p></p>
<p>  但是最后还是出错了，错误如下<br>  <img src="http://ww1.sinaimg.cn/bmiddle/68566be7gw1eto4b3udi8j20xx0fzq7a.jpg" alt="错误"></p>
<pre><code>顺便赞一下实验楼，整个过程都是在实验楼的虚拟机中完成的，响应速度真心不错。
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-whistle" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/01/whistle/" class="article-date">
  	<time datetime="2015-07-01T09:25:39.000Z" itemprop="datePublished">2015-07-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/01/whistle/">whistle</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->

        <script src="/assets/js/APlayer.min.js"> </script><p>随笔    线代终于考完了，感觉不是特别好吧。主要是第五章的内容自己复习的不够，只有继续努力复习才能忘掉这些没必要的东西啦。C语言也不是非常理想，67分，虽然也是过了，虽然不影响毕业。<br>    唯一值得自己庆幸的就是自己淘的爱尔兰哨笛终于到了，属于我的自我提升计划的一部分吧。<br>    <img src="http://ww2.sinaimg.cn/bmiddle/68566be7jw1etne6fvan0j20u00u0jv5.jpg" alt="苏萨特的黄鹂鸟"></p>
<p><img src="http://ww3.sinaimg.cn/bmiddle/68566be7jw1etne6mct0vj20u00u0n1u.jpg" alt="苏萨特的黄鹂鸟"></p>
<p>  到手了以后真的毫无感觉啊，abs所料真的让人感觉是凄美小博士啊。而且说好的和竹笛指法相似呢？<br>  <img src="http://s16.sinaimg.cn/middle/633658d7ga3f2a6a2681f&amp;690" alt="竹笛的在指法"><img src="http://imgsrc.baidu.com/forum/w=580/sign=cad6c2f80db30f24359aec0bf894d192/9d7880cb39dbb6fde3398cbf0b24ab18962b376f.jpg" alt="哨笛的指法"></p>
<p>  后来在网上进一步了解到，竹笛的G调=哨笛的高音D，那就还好，至少碰到一个自己熟悉的了。不过也是很久没有吹笛子了，拍数啊、识谱啊都不行了，只能说继续练习吧。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-lkong2weibo" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/01/lkong2weibo/" class="article-date">
  	<time datetime="2015-07-01T02:27:28.000Z" itemprop="datePublished">2015-07-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/01/lkong2weibo/">lkong2weibo</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->

        <script src="/assets/js/APlayer.min.js"> </script><p>技术</p>
<p>##为什么会产生这个想法<br>1.之前折腾IFTTT，尝试了下推送hipda的内容，虽然成功了，但是意义并不大。后来反应过来了还有龙的天空，并且发现了这个连接——<a href="http://www.yousuu.com/comments/digest" target="_blank" rel="external">大波书评</a>。尝试着用feed43自烧了一个<a href="http://feed43.com/0062551070718811.xml" target="_blank" rel="external">rss源</a></p>
<p>。个人感觉排版什么的都还算不错吧，悲剧的是ifttt竟然不识别。</p>
<p>2.feed43的更新频率据说是八个小时，而龙空书评的产生频率要远远高于这个刷新频率。之前做的bs2weibo也是如此，突然一下发一大堆微博，让多位好友被悲惨刷屏。</p>
<p>##解决方案<br>1.刚好最近在学python，网上又有现成的python登陆发送微博的教程。所以打算做个python爬虫，定时抓取优书网书评，然后发微博。</p>
<p>##需要的准备工具<br>1.python才学到装饰，争取下周内学完，然后开始爬虫学习</p>
<p>2.如果网上diy的python2weibo脚本不行，只能自己啃微博的python sdk了</p>
<p>3.尝试着翻墙弄个gae吧，虽然自己有树莓派，但是教育网实在太不友好</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 weakiwi
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
            <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
            </script>
            </br>本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次
            <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=298 height=52 src="http://music.163.com/outchain/player?type=0&id=108987177&auto=1&height=32"></iframe>
      	</div>
    </div>
  </div>
</footer>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: undefined,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: undefined
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>